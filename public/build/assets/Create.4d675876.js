import{g as W,C as X,u as Y,i as q,k as y,m as g,n as F,p as D,a2 as Z,a3 as ee,a4 as v,q as te,r as m,o as _,s as U,w as a,t as c,b as n,z as G,v as N,x as b,y as e,A as h,c as P,B as ne}from"./vendor.d8bc4b48.js";import{k as oe,l as le,m as re}from"./main.90d606cc.js";import{_ as se}from"./CreateCustomFields.24725e49.js";const ae=["onSubmit"],ie={class:"flex items-center justify-end"},ue={class:"grid grid-cols-5 gap-4 mb-8"},de={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},me={class:"grid grid-cols-5 gap-4 mb-8"},ce={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},pe={class:"space-y-6"},ge={class:"flex items-center justify-start mb-6 md:justify-end md:mb-0"},be={class:"p-1"},Ce={key:0,class:"grid grid-cols-5 gap-4 mb-8"},_e={class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},fe={class:"space-y-6"},$e={class:"grid grid-cols-5 gap-2 mb-8"},Ve={key:0,class:"col-span-5 text-lg font-semibold text-left lg:col-span-1"},ye={class:"col-span-5 lg:col-span-4"},Me={setup(ve){const l=oe(),x=le(),B=re(),S="customFields",{t:p}=W(),T=X(),j=Y();let r=q(!1);const f=q(!1),C=y(()=>j.name==="customers.edit");let A=y(()=>l.isFetchingInitialSettings);const k=y(()=>C.value?p("customers.edit_customer"):p("customers.new_customer")),E=y(()=>({currentCustomer:{name:{required:g.withMessage(p("validation.required"),F),minLength:g.withMessage(p("validation.name_min_length",{count:3}),D(3))},prefix:{minLength:g.withMessage(p("validation.name_min_length",{count:3}),D(3))},currency_id:{required:g.withMessage(p("validation.required"),F)},email:{email:g.withMessage(p("validation.email_incorrect"),Z)},website:{url:g.withMessage(p("validation.invalid_url"),ee)},billing:{address_street_1:{maxLength:g.withMessage(p("validation.address_maxlength",{count:255}),v(255))},address_street_2:{maxLength:g.withMessage(p("validation.address_maxlength",{count:255}),v(255))}},shipping:{address_street_1:{maxLength:g.withMessage(p("validation.address_maxlength",{count:255}),v(255))},address_street_2:{maxLength:g.withMessage(p("validation.address_maxlength",{count:255}),v(255))}}}})),i=te(E,l,{$scope:S});l.resetCurrentCustomer(),l.fetchCustomerInitialSettings(C.value);async function H(){if(i.value.$touch(),i.value.$invalid)return!0;f.value=!0;let s={...l.currentCustomer},t=null;try{t=await(C.value?l.updateCustomer:l.addCustomer)(s)}catch{f.value=!1;return}T.push(`/admin/customers/${t.data.data.id}/view`)}return(s,t)=>{const $=m("BaseBreadcrumbItem"),R=m("BaseBreadcrumb-item"),J=m("BaseBreadcrumb"),z=m("BaseIcon"),L=m("BaseButton"),K=m("BasePageHeader"),d=m("BaseInput"),u=m("BaseInputGroup"),w=m("BaseMultiselect"),M=m("BaseInputGrid"),I=m("BaseDivider"),V=m("BaseTextarea"),O=m("BaseCard"),Q=m("BasePage");return _(),U(Q,null,{default:a(()=>[c("form",{onSubmit:ne(H,["prevent"])},[n(K,{title:e(k)},{actions:a(()=>[c("div",ie,[n(L,{type:"submit",loading:f.value,disabled:f.value},{left:a(o=>[n(z,{name:"SaveIcon",class:G(o.class)},null,8,["class"])]),default:a(()=>[N(" "+b(e(C)?s.$t("customers.update_customer"):s.$t("customers.save_customer")),1)]),_:1},8,["loading","disabled"])])]),default:a(()=>[n(J,null,{default:a(()=>[n($,{title:s.$t("general.home"),to:"dashboard"},null,8,["title"]),n($,{title:s.$tc("customers.customer",2),to:"/admin/customers"},null,8,["title"]),n(R,{title:e(k),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),n(O,{class:"mt-5"},{default:a(()=>[c("div",ue,[c("h6",de,b(s.$t("customers.basic_info")),1),n(M,{class:"col-span-5 lg:col-span-4"},{default:a(()=>[n(u,{label:s.$t("customers.display_name"),required:"",error:e(i).currentCustomer.name.$error&&e(i).currentCustomer.name.$errors[0].$message,"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.name,"onUpdate:modelValue":t[0]||(t[0]=o=>e(l).currentCustomer.name=o),"content-loading":e(r),type:"text",name:"name",class:"",invalid:e(i).currentCustomer.name.$error,onInput:t[1]||(t[1]=o=>e(i).currentCustomer.name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"]),n(u,{label:s.$t("customers.primary_contact_name"),"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.contact_name,"onUpdate:modelValue":t[2]||(t[2]=o=>e(l).currentCustomer.contact_name=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),n(u,{error:e(i).currentCustomer.email.$error&&e(i).currentCustomer.email.$errors[0].$message,"content-loading":e(r),label:s.$t("customers.email")},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.email,"onUpdate:modelValue":t[3]||(t[3]=o=>e(l).currentCustomer.email=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",name:"email",invalid:e(i).currentCustomer.email.$error,onInput:t[4]||(t[4]=o=>e(i).currentCustomer.email.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["error","content-loading","label"]),n(u,{label:s.$t("customers.phone"),"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.phone,"onUpdate:modelValue":t[5]||(t[5]=o=>e(l).currentCustomer.phone=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",name:"phone"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),n(u,{label:s.$t("customers.primary_currency"),"content-loading":e(r),error:e(i).currentCustomer.currency_id.$error&&e(i).currentCustomer.currency_id.$errors[0].$message,required:""},{default:a(()=>[n(w,{modelValue:e(l).currentCustomer.currency_id,"onUpdate:modelValue":t[6]||(t[6]=o=>e(l).currentCustomer.currency_id=o),"value-prop":"id",label:"name","track-by":"name","content-loading":e(r),options:e(B).currencies,searchable:"","can-deselect":!1,placeholder:s.$t("customers.select_currency"),invalid:e(i).currentCustomer.currency_id.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","content-loading","error"]),n(u,{error:e(i).currentCustomer.website.$error&&e(i).currentCustomer.website.$errors[0].$message,label:s.$t("customers.website"),"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.website,"onUpdate:modelValue":t[7]||(t[7]=o=>e(l).currentCustomer.website=o),"content-loading":e(r),type:"url",onInput:t[8]||(t[8]=o=>e(i).currentCustomer.website.$touch())},null,8,["modelValue","content-loading"])]),_:1},8,["error","label","content-loading"]),n(u,{label:s.$t("customers.prefix"),error:e(i).currentCustomer.prefix.$error&&e(i).currentCustomer.prefix.$errors[0].$message,"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.prefix,"onUpdate:modelValue":t[9]||(t[9]=o=>e(l).currentCustomer.prefix=o),"content-loading":e(r),type:"text",name:"name",class:"",invalid:e(i).currentCustomer.prefix.$error,onInput:t[10]||(t[10]=o=>e(i).currentCustomer.prefix.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),_:1})]),n(I,{class:"mb-5 md:mb-8"}),c("div",me,[c("h6",ce,b(s.$t("customers.billing_address")),1),e(l).currentCustomer.billing?(_(),U(M,{key:0,class:"col-span-5 lg:col-span-4"},{default:a(()=>[n(u,{label:s.$t("customers.name"),"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.billing.name,"onUpdate:modelValue":t[11]||(t[11]=o=>e(l).currentCustomer.billing.name=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",class:"w-full",name:"address_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),n(u,{label:s.$t("customers.country"),"content-loading":e(r)},{default:a(()=>[n(w,{modelValue:e(l).currentCustomer.billing.country_id,"onUpdate:modelValue":t[12]||(t[12]=o=>e(l).currentCustomer.billing.country_id=o),"value-prop":"id",label:"name","track-by":"name","resolve-on-load":"",searchable:"","content-loading":e(r),options:e(B).countries,placeholder:s.$t("general.select_country"),class:"w-full"},null,8,["modelValue","content-loading","options","placeholder"])]),_:1},8,["label","content-loading"]),n(u,{label:s.$t("customers.state"),"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.billing.state,"onUpdate:modelValue":t[13]||(t[13]=o=>e(l).currentCustomer.billing.state=o),"content-loading":e(r),name:"billing.state",type:"text"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),n(u,{"content-loading":e(r),label:s.$t("customers.city")},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.billing.city,"onUpdate:modelValue":t[14]||(t[14]=o=>e(l).currentCustomer.billing.city=o),"content-loading":e(r),name:"billing.city",type:"text"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),n(u,{label:s.$t("customers.address"),error:e(i).currentCustomer.billing.address_street_1.$error&&e(i).currentCustomer.billing.address_street_1.$errors[0].$message||e(i).currentCustomer.billing.address_street_2.$error&&e(i).currentCustomer.billing.address_street_2.$errors[0].$message,"content-loading":e(r)},{default:a(()=>[n(V,{modelValue:e(l).currentCustomer.billing.address_street_1,"onUpdate:modelValue":t[15]||(t[15]=o=>e(l).currentCustomer.billing.address_street_1=o),modelModifiers:{trim:!0},"content-loading":e(r),placeholder:s.$t("general.street_1"),type:"text",name:"billing_street1","container-class":"mt-3",onInput:t[16]||(t[16]=o=>e(i).currentCustomer.billing.address_street_1.$touch())},null,8,["modelValue","content-loading","placeholder"]),n(V,{modelValue:e(l).currentCustomer.billing.address_street_2,"onUpdate:modelValue":t[17]||(t[17]=o=>e(l).currentCustomer.billing.address_street_2=o),modelModifiers:{trim:!0},"content-loading":e(r),placeholder:s.$t("general.street_2"),type:"text",class:"mt-3",name:"billing_street2","container-class":"mt-3",onInput:t[18]||(t[18]=o=>e(i).currentCustomer.billing.address_street_2.$touch())},null,8,["modelValue","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"]),c("div",pe,[n(u,{"content-loading":e(r),label:s.$t("customers.phone"),class:"text-left"},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.billing.phone,"onUpdate:modelValue":t[19]||(t[19]=o=>e(l).currentCustomer.billing.phone=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",name:"phone"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),n(u,{label:s.$t("customers.zip_code"),"content-loading":e(r),class:"mt-2 text-left"},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.billing.zip,"onUpdate:modelValue":t[20]||(t[20]=o=>e(l).currentCustomer.billing.zip=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",name:"zip"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"])])]),_:1})):h("",!0)]),n(I,{class:"mb-5 md:mb-8"}),c("div",ge,[c("div",be,[n(L,{type:"button","content-loading":e(r),size:"sm",variant:"primary-outline",onClick:t[21]||(t[21]=o=>e(l).copyAddress(!0))},{left:a(o=>[n(z,{name:"DocumentDuplicateIcon",class:G(o.class)},null,8,["class"])]),default:a(()=>[N(" "+b(s.$t("customers.copy_billing_address")),1)]),_:1},8,["content-loading"])])]),e(l).currentCustomer.shipping?(_(),P("div",Ce,[c("h6",_e,b(s.$t("customers.shipping_address")),1),n(M,{class:"col-span-5 lg:col-span-4"},{default:a(()=>[n(u,{"content-loading":e(r),label:s.$t("customers.name")},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.shipping.name,"onUpdate:modelValue":t[22]||(t[22]=o=>e(l).currentCustomer.shipping.name=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",name:"address_name"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),n(u,{label:s.$t("customers.country"),"content-loading":e(r)},{default:a(()=>[n(w,{modelValue:e(l).currentCustomer.shipping.country_id,"onUpdate:modelValue":t[23]||(t[23]=o=>e(l).currentCustomer.shipping.country_id=o),"value-prop":"id",label:"name","track-by":"name","resolve-on-load":"",searchable:"","content-loading":e(r),options:e(B).countries,placeholder:s.$t("general.select_country"),class:"w-full"},null,8,["modelValue","content-loading","options","placeholder"])]),_:1},8,["label","content-loading"]),n(u,{label:s.$t("customers.state"),"content-loading":e(r)},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.shipping.state,"onUpdate:modelValue":t[24]||(t[24]=o=>e(l).currentCustomer.shipping.state=o),"content-loading":e(r),name:"shipping.state",type:"text"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),n(u,{"content-loading":e(r),label:s.$t("customers.city")},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.shipping.city,"onUpdate:modelValue":t[25]||(t[25]=o=>e(l).currentCustomer.shipping.city=o),"content-loading":e(r),name:"shipping.city",type:"text"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),n(u,{label:s.$t("customers.address"),"content-loading":e(r),error:e(i).currentCustomer.shipping.address_street_1.$error&&e(i).currentCustomer.shipping.address_street_1.$errors[0].$message||e(i).currentCustomer.shipping.address_street_2.$error&&e(i).currentCustomer.shipping.address_street_2.$errors[0].$message},{default:a(()=>[n(V,{modelValue:e(l).currentCustomer.shipping.address_street_1,"onUpdate:modelValue":t[26]||(t[26]=o=>e(l).currentCustomer.shipping.address_street_1=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",placeholder:s.$t("general.street_1"),name:"shipping_street1",onInput:t[27]||(t[27]=o=>e(i).currentCustomer.shipping.address_street_1.$touch())},null,8,["modelValue","content-loading","placeholder"]),n(V,{modelValue:e(l).currentCustomer.shipping.address_street_2,"onUpdate:modelValue":t[28]||(t[28]=o=>e(l).currentCustomer.shipping.address_street_2=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",placeholder:s.$t("general.street_2"),name:"shipping_street2",class:"mt-3","container-class":"mt-3",onInput:t[29]||(t[29]=o=>e(i).currentCustomer.shipping.address_street_2.$touch())},null,8,["modelValue","content-loading","placeholder"])]),_:1},8,["label","content-loading","error"]),c("div",fe,[n(u,{"content-loading":e(r),label:s.$t("customers.phone"),class:"text-left"},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.shipping.phone,"onUpdate:modelValue":t[30]||(t[30]=o=>e(l).currentCustomer.shipping.phone=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",name:"phone"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),n(u,{label:s.$t("customers.zip_code"),"content-loading":e(r),class:"mt-2 text-left"},{default:a(()=>[n(d,{modelValue:e(l).currentCustomer.shipping.zip,"onUpdate:modelValue":t[31]||(t[31]=o=>e(l).currentCustomer.shipping.zip=o),modelModifiers:{trim:!0},"content-loading":e(r),type:"text",name:"zip"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"])])]),_:1})])):h("",!0),e(x).customFields.length>0?(_(),U(I,{key:1,class:"mb-5 md:mb-8"})):h("",!0),c("div",$e,[e(x).customFields.length>0?(_(),P("h6",Ve,b(s.$t("settings.custom_fields.title")),1)):h("",!0),c("div",ye,[n(se,{type:"Customer",store:e(l),"store-prop":"currentCustomer","is-edit":e(C),"is-loading":e(A),"custom-field-scope":S},null,8,["store","is-edit","is-loading"])])])]),_:1})],40,ae)]),_:1})}}};export{Me as default};
